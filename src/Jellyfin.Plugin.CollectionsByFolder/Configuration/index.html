<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CollectionsByFolder</title>

  <!-- Fr체h laden: scrollTo-Sanitizer + Rejection-Guard -->
  <script>
  (function () {
    function wrapScroll(fn) {
      return function () {
        var a0 = arguments[0];
        if (a0 && typeof a0 === "object" && "behavior" in a0 && (a0.behavior == null || a0.behavior === "null")) {
          var copy = {};
          for (var k in a0) if (Object.prototype.hasOwnProperty.call(a0,k)) copy[k]=a0[k];
          delete copy.behavior;
          arguments[0] = copy;
        }
        return fn.apply(this, arguments);
      };
    }
    try {
      if (Element && Element.prototype.scrollTo) Element.prototype.scrollTo = wrapScroll(Element.prototype.scrollTo);
      if (window && window.scrollTo) window.scrollTo = wrapScroll(window.scrollTo);
    } catch(e) {}
    window.addEventListener("unhandledrejection", function (ev) {
      var r = ev && ev.reason && (ev.reason.message || ev.reason) || "";
      if (String(r).indexOf("behavior") !== -1 && String(r).indexOf("ScrollOptions") !== -1) {
        ev.preventDefault(); ev.stopPropagation(); return false;
      }
    }, true);
  })();
  </script>

  <!-- kleines CSS, das jQM-Layout-Scrolling gar nicht erst triggert -->
  <style>
    html,body{height:auto !important; overflow:auto !important;}
    .content-primary{padding:16px;}
    .fieldSet{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem;}
    .inputContainer{margin:.5rem 0;}
  </style>
</head>
<body>
  <!-- WICHTIG: KEIN data-role="page" -->
  <div class="page type-interior pluginConfigurationPage" data-require="emby-button,emby-input,emby-select">
    <div class="content-primary">
      <h2>Sammlungen nach Ordnern</h2>
      <p>Erstellt Collections anhand des letzten Ordnernamens.</p>

      <div class="inputContainer">
        <label class="inputLabel" for="cbf-folderPaths">Filmverzeichnisse (kommasepariert)</label>
        <input is="emby-input" id="cbf-folderPaths" type="text" />
      </div>

      <div class="inputContainer">
        <label class="inputLabel" for="cbf-prefix">Pr채fix</label>
        <input is="emby-input" id="cbf-prefix" type="text" />
      </div>

      <div class="inputContainer">
        <label class="inputLabel" for="cbf-suffix">Suffix</label>
        <input is="emby-input" id="cbf-suffix" type="text" />
      </div>

      <div class="inputContainer">
        <label class="inputLabel" for="cbf-blacklist">Blacklist (kommasepariert)</label>
        <input is="emby-input" id="cbf-blacklist" type="text" />
      </div>

      <div class="inputContainer">
        <label class="inputLabel" for="cbf-minItemCount">Minimale Anzahl Filme pro Ordner</label>
        <input is="emby-input" id="cbf-minItemCount" type="number" min="1" />
      </div>

      <div class="inputContainer">
        <label class="checkboxLabel">
          <input type="checkbox" id="cbf-enableDailyScan" />
          <span>T채glichen Scan aktivieren</span>
        </label>
      </div>

      <div class="inputContainer">
        <label class="inputLabel" for="cbf-scanTime">Uhrzeit (HH:MM)</label>
        <input is="emby-input" id="cbf-scanTime" type="time" />
      </div>

      <div class="fieldSet">
        <button is="emby-button" type="button" class="raised" id="cbf-btnSave"><span>Speichern</span></button>
        <button is="emby-button" type="button" class="raised" id="cbf-btnScan"><span>Jetzt scannen</span></button>
      </div>

      <div id="cbf-status" style="margin-top:10px;"></div>
    </div>
  </div>

  <!-- l채dt die Embedded-Resource "collectionsbyfolderjs" -->
  <script src="collectionsbyfolderjs"></script>
</body>
</html>
